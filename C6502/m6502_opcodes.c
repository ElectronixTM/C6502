#include "m6502_opcodes.h"

#define OPCODES_TABLE_SIZE (16*16)

/**
 * Данный файл генерируется скриптами из дирректории scripts и
 * содержит разобранные таблицы с характерристиками опкодов
 * с сайта https://www.masswerk.at/6502/6502_instruction_set.html
 * при активации скрипта все ваши изменения в этом файле будут
 * удалены. Если необходимо изменить данный файл, изменяйте его
 * шаблон в папке scripts/templates
 */

/**
 * Таблица, сопоставляющая опкод его описанию. Поскольку в оригинальном
 * 6502 находили применение также невалидным инструкциям, валидации
 * корректности опкода не предполагается. Однако в рамках этого
 * эмулятора некорректные опкоды не поддерживаются и заменены NOP'ами
 */
static struct m6502_OpCodeDesc opcodes_table[OPCODES_TABLE_SIZE] = {
  {MNEM_BRK, 1, 7, AM_IMPL},
  {MNEM_ORA, 2, 6, AM_X_IND},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_ORA, 2, 3, AM_ZPG},
  {MNEM_ASL, 2, 5, AM_ZPG},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_PHP, 1, 3, AM_IMPL},
  {MNEM_ORA, 2, 2, AM_IMM},
  {MNEM_ASL, 1, 2, AM_A},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_ORA, 3, 4, AM_ABS},
  {MNEM_ASL, 3, 6, AM_ABS},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_BPL, 2, 2, AM_REL},
  {MNEM_ORA, 2, 5, AM_IND_Y},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_ORA, 2, 4, AM_ZPG_X},
  {MNEM_ASL, 2, 6, AM_ZPG_X},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_CLC, 1, 2, AM_IMPL},
  {MNEM_ORA, 3, 4, AM_ABS_Y},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_ORA, 3, 4, AM_ABS_X},
  {MNEM_ASL, 3, 7, AM_ABS_X},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_JSR, 3, 6, AM_ABS},
  {MNEM_AND, 2, 6, AM_X_IND},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_BIT, 2, 3, AM_ZPG},
  {MNEM_AND, 2, 3, AM_ZPG},
  {MNEM_ROL, 2, 5, AM_ZPG},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_PLP, 1, 4, AM_IMPL},
  {MNEM_AND, 2, 2, AM_IMM},
  {MNEM_ROL, 1, 2, AM_A},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_BIT, 3, 4, AM_ABS},
  {MNEM_AND, 3, 4, AM_ABS},
  {MNEM_ROL, 3, 6, AM_ABS},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_BMI, 2, 2, AM_REL},
  {MNEM_AND, 2, 5, AM_IND_Y},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_AND, 2, 4, AM_ZPG_X},
  {MNEM_ROL, 2, 6, AM_ZPG_X},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_SEC, 1, 2, AM_IMPL},
  {MNEM_AND, 3, 4, AM_ABS_Y},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_AND, 3, 4, AM_ABS_X},
  {MNEM_ROL, 3, 7, AM_ABS_X},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_RTI, 1, 6, AM_IMPL},
  {MNEM_EOR, 2, 6, AM_X_IND},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_EOR, 2, 3, AM_ZPG},
  {MNEM_LSR, 2, 5, AM_ZPG},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_PHA, 1, 3, AM_IMPL},
  {MNEM_EOR, 2, 2, AM_IMM},
  {MNEM_LSR, 1, 2, AM_A},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_JMP, 3, 3, AM_ABS},
  {MNEM_EOR, 3, 4, AM_ABS},
  {MNEM_LSR, 3, 6, AM_ABS},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_BVC, 2, 2, AM_REL},
  {MNEM_EOR, 2, 5, AM_IND_Y},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_EOR, 2, 4, AM_ZPG_X},
  {MNEM_LSR, 2, 6, AM_ZPG_X},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_CLI, 1, 2, AM_IMPL},
  {MNEM_EOR, 3, 4, AM_ABS_Y},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_EOR, 3, 4, AM_ABS_X},
  {MNEM_LSR, 3, 7, AM_ABS_X},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_RTS, 1, 6, AM_IMPL},
  {MNEM_ADC, 2, 6, AM_X_IND},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_ADC, 2, 3, AM_ZPG},
  {MNEM_ROR, 2, 5, AM_ZPG},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_PLA, 1, 4, AM_IMPL},
  {MNEM_ADC, 2, 2, AM_IMM},
  {MNEM_ROR, 1, 2, AM_A},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_JMP, 3, 5, AM_IND},
  {MNEM_ADC, 3, 4, AM_ABS},
  {MNEM_ROR, 3, 6, AM_ABS},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_BVS, 2, 2, AM_REL},
  {MNEM_ADC, 2, 5, AM_IND_Y},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_ADC, 2, 4, AM_ZPG_X},
  {MNEM_ROR, 2, 6, AM_ZPG_X},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_SEI, 1, 2, AM_IMPL},
  {MNEM_ADC, 3, 4, AM_ABS_Y},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_ADC, 3, 4, AM_ABS_X},
  {MNEM_ROR, 3, 7, AM_ABS_X},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_STA, 2, 6, AM_X_IND},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_STY, 2, 3, AM_ZPG},
  {MNEM_STA, 2, 3, AM_ZPG},
  {MNEM_STX, 2, 3, AM_ZPG},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_DEY, 1, 2, AM_IMPL},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_TXA, 1, 2, AM_IMPL},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_STY, 3, 4, AM_ABS},
  {MNEM_STA, 3, 4, AM_ABS},
  {MNEM_STX, 3, 4, AM_ABS},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_BCC, 2, 2, AM_REL},
  {MNEM_STA, 2, 6, AM_IND_Y},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_STY, 2, 4, AM_ZPG_X},
  {MNEM_STA, 2, 4, AM_ZPG_X},
  {MNEM_STX, 2, 4, AM_ZPG_Y},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_TYA, 1, 2, AM_IMPL},
  {MNEM_STA, 3, 5, AM_ABS_Y},
  {MNEM_TXS, 1, 2, AM_IMPL},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_STA, 3, 5, AM_ABS_X},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_LDY, 2, 2, AM_IMM},
  {MNEM_LDA, 2, 6, AM_X_IND},
  {MNEM_LDX, 2, 2, AM_IMM},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_LDY, 2, 3, AM_ZPG},
  {MNEM_LDA, 2, 3, AM_ZPG},
  {MNEM_LDX, 2, 3, AM_ZPG},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_TAY, 1, 2, AM_IMPL},
  {MNEM_LDA, 2, 2, AM_IMM},
  {MNEM_TAX, 1, 2, AM_IMPL},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_LDY, 3, 4, AM_ABS},
  {MNEM_LDA, 3, 4, AM_ABS},
  {MNEM_LDX, 3, 4, AM_ABS},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_BCS, 2, 2, AM_REL},
  {MNEM_LDA, 2, 5, AM_IND_Y},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_LDY, 2, 4, AM_ZPG_X},
  {MNEM_LDA, 2, 4, AM_ZPG_X},
  {MNEM_LDX, 2, 4, AM_ZPG_Y},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_CLV, 1, 2, AM_IMPL},
  {MNEM_LDA, 3, 4, AM_ABS_Y},
  {MNEM_TSX, 1, 2, AM_IMPL},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_LDY, 3, 4, AM_ABS_X},
  {MNEM_LDA, 3, 4, AM_ABS_X},
  {MNEM_LDX, 3, 4, AM_ABS_Y},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_CPY, 2, 2, AM_IMM},
  {MNEM_CMP, 2, 6, AM_X_IND},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_CPY, 2, 3, AM_ZPG},
  {MNEM_CMP, 2, 3, AM_ZPG},
  {MNEM_DEC, 2, 5, AM_ZPG},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_INY, 1, 2, AM_IMPL},
  {MNEM_CMP, 2, 2, AM_IMM},
  {MNEM_DEX, 1, 2, AM_IMPL},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_CPY, 3, 4, AM_ABS},
  {MNEM_CMP, 3, 4, AM_ABS},
  {MNEM_DEC, 3, 6, AM_ABS},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_BNE, 2, 2, AM_REL},
  {MNEM_CMP, 2, 5, AM_IND_Y},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_CMP, 2, 4, AM_ZPG_X},
  {MNEM_DEC, 2, 6, AM_ZPG_X},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_CLD, 1, 2, AM_IMPL},
  {MNEM_CMP, 3, 4, AM_ABS_Y},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_CMP, 3, 4, AM_ABS_X},
  {MNEM_DEC, 3, 7, AM_ABS_X},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_CPX, 2, 2, AM_IMM},
  {MNEM_SBC, 2, 6, AM_X_IND},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_CPX, 2, 3, AM_ZPG},
  {MNEM_SBC, 2, 3, AM_ZPG},
  {MNEM_INC, 2, 5, AM_ZPG},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_INX, 1, 2, AM_IMPL},
  {MNEM_SBC, 2, 2, AM_IMM},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_CPX, 3, 4, AM_ABS},
  {MNEM_SBC, 3, 4, AM_ABS},
  {MNEM_INC, 3, 6, AM_ABS},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_BEQ, 2, 2, AM_REL},
  {MNEM_SBC, 2, 5, AM_IND_Y},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_SBC, 2, 4, AM_ZPG_X},
  {MNEM_INC, 2, 6, AM_ZPG_X},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_SED, 1, 2, AM_IMPL},
  {MNEM_SBC, 3, 4, AM_ABS_Y},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_NOP, 1, 2, AM_IMPL},
  {MNEM_SBC, 3, 4, AM_ABS_X},
  {MNEM_INC, 3, 7, AM_ABS_X},
  {MNEM_NOP, 1, 2, AM_IMPL}
};

const struct m6502_OpCodeDesc* m6502_fetch_opcode_desc(uint8_t opcode)
{
  return &opcodes_table[opcode];
}

